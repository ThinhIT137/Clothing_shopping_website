@* @model Clothing_shopping.Views.Shared._HeaderModel *@
@{
    var CurrentController = ViewContext.RouteData.Values["controller"].ToString();
    var userID = HttpContextAccessor.HttpContext.Session.GetString("UserId");
    var FullName = HttpContextAccessor.HttpContext.Session.GetString("FullName");
    var json = HttpContextAccessor.HttpContext.Session.GetString("Notification");
    var Notification = string.IsNullOrEmpty(json)
    ? new List<News>()
    : JsonConvert.DeserializeObject<List<News>>(json); ;

    var CategoryName = new Dictionary<int, string>
    {
        {1, "Áo phông"},
        {2, "Áo sơ mi"},
        {3, "Áo hoodie"},
        {4, "Áo khoác"},
        {5, "Áo phao"},
        {6, "Áo dài"},
        {7, "Quần jean"},
        {8, "Quần short"},
        {9, "Quần dài"},
        {10, "Chân váy"},
        {11, "Đầm"},
        {12, "Giày Nike"},
        {13, "Giày Adidas"},
        {14, "Giày cao gót"},
        {15, "Giày bốt"},
        {16, "Dép tông"},
        {17, "Dép sục"},
        {18, "Dép tổ ong"},
        {19, "Tạp dề"}
    };

    var Nam = new Dictionary<string, int[]>
    {
        { "Áo",   new[] {1,2,3,4,5,6} },
        { "Quần", new[] {7,8,9} },
        { "Giày", new[] {12,13} },
        { "Dép",  new[] {16,17,18} },
    };

    var Nu = new Dictionary<string, int[]>
    {
        { "Áo",   new[] {1,2,3,4,5,6} },
        { "Quần", new[] {7,8,9} },
        { "Váy",  new[] {10,11} },
        { "Giày", new[] {12,13,14,15} },
        { "Dép",  new[] {16,17,18} },
    };

    var TreEm = new Dictionary<string, Dictionary<string, int[]>>
    {
        ["Nam"] = new()
        {
            { "Áo",   new[] {1,2,3,4,5,6} },
            { "Quần", new[] {7,8,9} },
            { "Giày", new[] {12,13} },
            { "Dép",  new[] {16,17,18} },
        },
        ["Nữ"] = new()
        {
            { "Áo",   new[] {1,2,3,4,5,6} },
            { "Quần", new[] {7,8,9} },
            { "Váy",  new[] {10,11} },
            { "Giày", new[] {12,13,14,15} },
            { "Dép",  new[] {16,17,18} },
        }
    };

}
<header>
    <div class="header_container">
        <div class="logo">
            <a asp-controller="Home" asp-action="Index">
                <img loading="lazy" src="/images/logo.svg" alt="" />
            </a>
        </div>
        <nav>

            <!-- NAM -->
            <div class="Nam">
                <a asp-controller="Home" asp-action="Product" asp-route-TargetGroup="0"
                   class="nam_click_product @(Context.Request.Query["TargetGroup"] == "0" ? "ac" : "")">
                    <span>Nam</span>
                </a>

                <div class="Nam_Product Product">
                    @foreach (var group in Nam)
                    {
                        <div class="Product_column">
                            @foreach (var id in group.Value)
                            {
                                <a asp-controller="Home" asp-action="Product"
                                   asp-route-TargetGroup="0" asp-route-CategoryId="@id">
                                    <span>@CategoryName[id]</span>
                                </a>
                            }
                        </div>
                    }
                </div>
            </div>


            <!-- NỮ -->
            <div class="Nu">
                <a asp-controller="Home" asp-action="Product" asp-route-TargetGroup="1"
                   class="nu_click_product @(Context.Request.Query["TargetGroup"] == "1" ? "ac" : "")">
                    <span>Nữ</span>
                </a>

                <div class="Nu_Product Product">
                    @foreach (var group in Nu)
                    {
                        <div class="Product_column">
                            @foreach (var id in group.Value)
                            {
                                <a asp-controller="Home" asp-action="Product"
                                   asp-route-TargetGroup="1" asp-route-CategoryId="@id">
                                    <span>@CategoryName[id]</span>
                                </a>
                            }
                        </div>
                    }
                </div>
            </div>


            <!-- TRẺ EM -->
            <div class="TreEm">
                <a asp-controller="Home" asp-action="Product" asp-route-TargetGroup="2"
                   class="treEm_click_product @(Context.Request.Query["TargetGroup"] == "2" ? "ac" : "")">
                    <span>Trẻ em</span>
                </a>

                <div class="TreEm_Product Product">

                    @foreach (var gender in TreEm)
                    {
                        <div class="Product_column">
                            <strong>@gender.Key</strong>

                            @foreach (var group in gender.Value)
                            {
                                foreach (var id in group.Value)
                                {
                                    <a asp-controller="Home" asp-action="Product"
                                       asp-route-TargetGroup="2" asp-route-CategoryId="@id">
                                        <span>@CategoryName[id]</span>
                                    </a>
                                }
                            }
                        </div>
                    }

                </div>
            </div>

        </nav>
        <div class="user">
            <div>
                @if (userID == null)
                {
                    <a asp-controller="User" asp-action="Login">
                        <i class="fa-solid fa-user"></i>
                    </a>
                }
                else
                {
                    <div id="user_drop_down">
                        <i class="fa-solid fa-user icon"></i>
                        <i class="fa-solid fa-angle-down"></i>
                    </div>

                    <div class="profile" id="user_profile">
                        <div class="cloumn column_profile">
                            <a asp-controller="User" asp-action="Profile">
                                <span>@FullName</span>
                            </a>
                        </div>
                        <hr />
                        <div class="cloumn">
                            <a asp-controller="User" asp-action="Help">
                                <i class="fa-solid fa-question"></i>
                                <span>Hỗ trợ và trợ giúp</span>
                                <i class="fa-solid fa-angle-right"></i>
                            </a>
                        </div>
                        <div class="cloumn">
                            <a asp-action="Settings" asp-controller="User">
                                <i class="fa-solid fa-gear"></i>
                                <span>Settings</span>
                                <i class="fa-solid fa-angle-right"></i>
                            </a>
                        </div>
                        <hr />
                        <div class="cloumn column_logOut">
                            <a asp-controller="User" asp-action="LogOut">
                                <i class="fa-solid fa-right-from-bracket"></i>
                                <span>Đăng xuất</span>
                            </a>
                        </div>
                    </div>
                }
            </div>
            <div>
                @if(userID == null)
                {
                    <a asp-controller="User" asp-action="Login">
                        <i id="header-wishlist-icon" class="fa-regular fa-heart icon"></i>
                    </a>
                }
                else
                {
                    <a asp-controller="Home" asp-action="Favorite">
                        <i id="header-wishlist-icon" class="fa-regular fa-heart icon"></i>
                    </a>
                }
            </div>
            <div class="Notification">
                @if (userID == null)
                {
                    <a asp-controller="User" asp-action="Login">
                        <i class="fa-solid fa-bell icon"></i>
                    </a>
                }
                else
                {
                    <div id="btn_Notification">
                        <i class="fa-solid fa-bell icon"></i>
                    </div>
                    <div id="Notification" class="Notification_Notification">
                        @if (Notification == null)
                        {
                            <div>Bạn không có thông báo</div>
                        }
                        else {
                            @foreach(var notify in Notification)
                            {
                                @await Html.PartialAsync("_notification", notify)
                            }
                        }
                    </div>
                }
            </div>
        </div>
    </div>
</header>

<div class="btn_use" style="@(CurrentController == "Login" ? "display:none;" : "")">
    <div class="search" id="search">
        <div class="search_container" id="search_results" style="display: none;">
        </div>

        <div class="search_form_wrapper" style="position: relative; width: 100%; max-width: 600px; display: flex; align-items: center; border-bottom: 2px solid #000; padding-bottom: 10px;">
            <input type="text" id="search_input" placeholder="Nhập tên sản phẩm..." autocomplete="off"
                   style="width: 100%; border: none; background: transparent; font-size: 24px; font-weight: bold; color: #000; outline: none;" />

            <button type="button" id="btn_close_search_box" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">
                <i class="fa-solid fa-x"></i>
            </button>
        </div>
    </div>

    <div class="btn_use_container">
        <div>
            <a asp-controller="Home" asp-action="Index">
                <i class="fa-solid fa-house icon"></i>
            </a>
        </div>
        <div>
            <a href="javascript:void(0);" id="btn_open_search">
                <i id="btn_search_icon" class="fa-solid fa-magnifying-glass icon"></i>
            </a>
        </div>
        <div>
            @if (userID == null)
            {
                <a asp-controller="User" asp-action="Login">
                    <i class="fa-solid fa-cart-shopping icon"></i>
                </a>
            }
            else
            {
                <a asp-controller="Order" asp-action="Cart">
                    <i id="header_cartlist_icon" class="fa-solid fa-cart-shopping icon"></i>
                </a>
            }
        </div>
    </div>
</div>